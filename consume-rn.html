<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Detector simple de Triángulos</title>
  <script src="https://cdn.jsdelivr.net/npm/p5@1.4.0/lib/p5.min.js"></script>
  <style>
    body { background-color: antiquewhite; text-align: center; font-family: Arial; }
    canvas { border: 1px solid black; margin-top: 10px; }
    button { margin-top: 10px; }
  </style>
</head>
<body>

<h2>Dibuja 3 puntos para formar un triángulo</h2>
<p id="mensaje">Haz clic en 3 lugares dentro del cuadro</p>
<button onclick="limpiar()">Limpiar</button>

<script>
  let puntos = [];

  function setup() {
    createCanvas(400, 400);
    background(255);
  }

  function draw() {
    background(255);

    // Dibuja los puntos y líneas si hay más de 1
    stroke(0);
    strokeWeight(8);
    for(let p of puntos){
      point(p.x, p.y);
    }

    if(puntos.length === 3){
      strokeWeight(2);
      line(puntos[0].x, puntos[0].y, puntos[1].x, puntos[1].y);
      line(puntos[1].x, puntos[1].y, puntos[2].x, puntos[2].y);
      line(puntos[2].x, puntos[2].y, puntos[0].x, puntos[0].y);
    }
  }

  function mousePressed() {
    if(puntos.length < 3 && mouseX >= 0 && mouseX <= width && mouseY >= 0 && mouseY <= height){
      puntos.push(createVector(mouseX, mouseY));
      if(puntos.length === 3){
        let tipo = tipoTriangulo();
        document.getElementById('mensaje').innerText = `Triángulo ${tipo}`;
      }
    }
  }

  function limpiar(){
    puntos = [];
    background(255);
    document.getElementById('mensaje').innerText = "Haz clic en 3 lugares dentro del cuadro";
  }

  // Función para calcular la distancia entre dos puntos
  function distancia(a, b){
    return dist(a.x, a.y, b.x, b.y);
  }

  // Función para determinar el tipo de triángulo
  function tipoTriangulo(){
    let d1 = distancia(puntos[0], puntos[1]);
    let d2 = distancia(puntos[1], puntos[2]);
    let d3 = distancia(puntos[2], puntos[0]);

    const tol = 5; // tolerancia para considerar iguales las longitudes

    if(abs(d1 - d2) < tol && abs(d2 - d3) < tol){
      return "Equilátero";
    } else if(abs(d1 - d2) < tol || abs(d2 - d3) < tol || abs(d1 - d3) < tol){
      return "Isósceles";
    } else {
      return "Escaleno";
    }
  }
</script>

</body>
</html>

